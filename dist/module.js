/*! For license information please see module.js.LICENSE.txt */
define(["lodash","d3","jquery","app/core/utils/kbn","app/core/core","app/plugins/sdk","app/core/core_module","moment","app/core/utils/ticks"],(function(e,t,a,r,n,i,o,c,s){return function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=13)}([function(t,a){t.exports=e},function(e,a){e.exports=t},function(e,t){e.exports=a},function(e,t){e.exports=r},function(e,t){e.exports=n},,function(e,t){e.exports=i},function(e,t){e.exports=o},function(e,t){e.exports=c},,function(e,t){e.exports=s},,,function(e,t,a){"use strict";a.r(t);var r={};a.r(r),a.d(r,"schemeCategory10",(function(){return m})),a.d(r,"schemeAccent",(function(){return g})),a.d(r,"schemeDark2",(function(){return v})),a.d(r,"schemePaired",(function(){return y})),a.d(r,"schemePastel1",(function(){return x})),a.d(r,"schemePastel2",(function(){return w})),a.d(r,"schemeSet1",(function(){return M})),a.d(r,"schemeSet2",(function(){return k})),a.d(r,"schemeSet3",(function(){return S})),a.d(r,"schemeTableau10",(function(){return C})),a.d(r,"interpolateBrBG",(function(){return le})),a.d(r,"schemeBrBG",(function(){return de})),a.d(r,"interpolatePRGn",(function(){return ue})),a.d(r,"schemePRGn",(function(){return he})),a.d(r,"interpolatePiYG",(function(){return be})),a.d(r,"schemePiYG",(function(){return pe})),a.d(r,"interpolatePuOr",(function(){return ge})),a.d(r,"schemePuOr",(function(){return me})),a.d(r,"interpolateRdBu",(function(){return ye})),a.d(r,"schemeRdBu",(function(){return ve})),a.d(r,"interpolateRdGy",(function(){return we})),a.d(r,"schemeRdGy",(function(){return xe})),a.d(r,"interpolateRdYlBu",(function(){return ke})),a.d(r,"schemeRdYlBu",(function(){return Me})),a.d(r,"interpolateRdYlGn",(function(){return Ce})),a.d(r,"schemeRdYlGn",(function(){return Se})),a.d(r,"interpolateSpectral",(function(){return Ae})),a.d(r,"schemeSpectral",(function(){return Pe})),a.d(r,"interpolateBuGn",(function(){return Re})),a.d(r,"schemeBuGn",(function(){return Te})),a.d(r,"interpolateBuPu",(function(){return He})),a.d(r,"schemeBuPu",(function(){return _e})),a.d(r,"interpolateGnBu",(function(){return Ye})),a.d(r,"schemeGnBu",(function(){return We})),a.d(r,"interpolateOrRd",(function(){return Oe})),a.d(r,"schemeOrRd",(function(){return Be})),a.d(r,"interpolatePuBuGn",(function(){return Ve})),a.d(r,"schemePuBuGn",(function(){return Ee})),a.d(r,"interpolatePuBu",(function(){return ze})),a.d(r,"schemePuBu",(function(){return De})),a.d(r,"interpolatePuRd",(function(){return Fe})),a.d(r,"schemePuRd",(function(){return Ge})),a.d(r,"interpolateRdPu",(function(){return Ie})),a.d(r,"schemeRdPu",(function(){return Ne})),a.d(r,"interpolateYlGnBu",(function(){return $e})),a.d(r,"schemeYlGnBu",(function(){return Le})),a.d(r,"interpolateYlGn",(function(){return qe})),a.d(r,"schemeYlGn",(function(){return je})),a.d(r,"interpolateYlOrBr",(function(){return Xe})),a.d(r,"schemeYlOrBr",(function(){return Ue})),a.d(r,"interpolateYlOrRd",(function(){return Je})),a.d(r,"schemeYlOrRd",(function(){return Qe})),a.d(r,"interpolateBlues",(function(){return Ze})),a.d(r,"schemeBlues",(function(){return Ke})),a.d(r,"interpolateGreens",(function(){return tt})),a.d(r,"schemeGreens",(function(){return et})),a.d(r,"interpolateGreys",(function(){return rt})),a.d(r,"schemeGreys",(function(){return at})),a.d(r,"interpolatePurples",(function(){return it})),a.d(r,"schemePurples",(function(){return nt})),a.d(r,"interpolateReds",(function(){return ct})),a.d(r,"schemeReds",(function(){return ot})),a.d(r,"interpolateOranges",(function(){return ft})),a.d(r,"schemeOranges",(function(){return st})),a.d(r,"interpolateCividis",(function(){return dt})),a.d(r,"interpolateCubehelixDefault",(function(){return Pt})),a.d(r,"interpolateRainbow",(function(){return _t})),a.d(r,"interpolateWarm",(function(){return At})),a.d(r,"interpolateCool",(function(){return Tt})),a.d(r,"interpolateSinebow",(function(){return Bt})),a.d(r,"interpolateTurbo",(function(){return Ot})),a.d(r,"interpolateViridis",(function(){return Vt})),a.d(r,"interpolateMagma",(function(){return Dt})),a.d(r,"interpolateInferno",(function(){return zt})),a.d(r,"interpolatePlasma",(function(){return Gt}));var n={};a.r(n),a.d(n,"graphHover",(function(){return Ut})),a.d(n,"graphHoverClear",(function(){return Xt})),a.d(n,"fallbackToStringEvents",(function(){return Qt}));var i={};a.r(i),a.d(i,"refresh",(function(){return Jt})),a.d(i,"render",(function(){return Kt})),a.d(i,"dataError",(function(){return Zt})),a.d(i,"dataReceived",(function(){return ea})),a.d(i,"dataSnapshotLoad",(function(){return ta})),a.d(i,"editModeInitialized",(function(){return aa})),a.d(i,"fallbackToStringEvents",(function(){return ra}));var o={};a.r(o),a.d(o,"hasAppEventCompatibleEmitter",(function(){return Aa}));var c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)};var s=function(){return(s=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function f(e){var t="function"==typeof Symbol&&Symbol.iterator,a=t&&e[t],r=0;if(a)return a.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var d=a(0),l=a.n(d),h=a(2),u=a.n(h),p=a(1),b=function(e){for(var t=e.length/6|0,a=new Array(t),r=0;r<t;)a[r]="#"+e.slice(6*r,6*++r);return a},m=b("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),g=b("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),v=b("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),y=b("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),x=b("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),w=b("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),M=b("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),k=b("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),S=b("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),C=b("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),P=function(e,t,a){e.prototype=t.prototype=a,a.constructor=e};function A(e,t){var a=Object.create(e.prototype);for(var r in t)a[r]=t[r];return a}function T(){}var R="\\s*([+-]?\\d+)\\s*",_="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",H="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",W=/^#([0-9a-f]{3,8})$/,Y=new RegExp("^rgb\\("+[R,R,R]+"\\)$"),B=new RegExp("^rgb\\("+[H,H,H]+"\\)$"),O=new RegExp("^rgba\\("+[R,R,R,_]+"\\)$"),E=new RegExp("^rgba\\("+[H,H,H,_]+"\\)$"),V=new RegExp("^hsl\\("+[_,H,H]+"\\)$"),D=new RegExp("^hsla\\("+[_,H,H,_]+"\\)$"),z={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function G(){return this.rgb().formatHex()}function F(){return this.rgb().formatRgb()}function N(e){var t,a;return e=(e+"").trim().toLowerCase(),(t=W.exec(e))?(a=t[1].length,t=parseInt(t[1],16),6===a?I(t):3===a?new U(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===a?L(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===a?L(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Y.exec(e))?new U(t[1],t[2],t[3],1):(t=B.exec(e))?new U(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=O.exec(e))?L(t[1],t[2],t[3],t[4]):(t=E.exec(e))?L(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=V.exec(e))?K(t[1],t[2]/100,t[3]/100,1):(t=D.exec(e))?K(t[1],t[2]/100,t[3]/100,t[4]):z.hasOwnProperty(e)?I(z[e]):"transparent"===e?new U(NaN,NaN,NaN,0):null}function I(e){return new U(e>>16&255,e>>8&255,255&e,1)}function L(e,t,a,r){return r<=0&&(e=t=a=NaN),new U(e,t,a,r)}function j(e){return e instanceof T||(e=N(e)),e?new U((e=e.rgb()).r,e.g,e.b,e.opacity):new U}function q(e,t,a,r){return 1===arguments.length?j(e):new U(e,t,a,null==r?1:r)}function U(e,t,a,r){this.r=+e,this.g=+t,this.b=+a,this.opacity=+r}function X(){return"#"+J(this.r)+J(this.g)+J(this.b)}function Q(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function J(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function K(e,t,a,r){return r<=0?e=t=a=NaN:a<=0||a>=1?e=t=NaN:t<=0&&(e=NaN),new ee(e,t,a,r)}function Z(e){if(e instanceof ee)return new ee(e.h,e.s,e.l,e.opacity);if(e instanceof T||(e=N(e)),!e)return new ee;if(e instanceof ee)return e;var t=(e=e.rgb()).r/255,a=e.g/255,r=e.b/255,n=Math.min(t,a,r),i=Math.max(t,a,r),o=NaN,c=i-n,s=(i+n)/2;return c?(o=t===i?(a-r)/c+6*(a<r):a===i?(r-t)/c+2:(t-a)/c+4,c/=s<.5?i+n:2-i-n,o*=60):c=s>0&&s<1?0:o,new ee(o,c,s,e.opacity)}function ee(e,t,a,r){this.h=+e,this.s=+t,this.l=+a,this.opacity=+r}function te(e,t,a){return 255*(e<60?t+(a-t)*e/60:e<180?a:e<240?t+(a-t)*(240-e)/60:t)}function ae(e,t,a,r,n){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*a+(1+3*e+3*i-3*o)*r+o*n)/6}P(T,N,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:G,formatHex:G,formatHsl:function(){return Z(this).formatHsl()},formatRgb:F,toString:F}),P(U,q,A(T,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new U(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new U(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:X,formatHex:X,formatRgb:Q,toString:Q})),P(ee,(function(e,t,a,r){return 1===arguments.length?Z(e):new ee(e,t,a,null==r?1:r)}),A(T,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new ee(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new ee(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,r=a+(a<.5?a:1-a)*t,n=2*a-r;return new U(te(e>=240?e-240:e+120,n,r),te(e,n,r),te(e<120?e+240:e-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var re=e=>()=>e;function ne(e,t){return function(a){return e+a*t}}function ie(e){return 1==(e=+e)?oe:function(t,a){return a-t?function(e,t,a){return e=Math.pow(e,a),t=Math.pow(t,a)-e,a=1/a,function(r){return Math.pow(e+r*t,a)}}(t,a,e):re(isNaN(t)?a:t)}}function oe(e,t){var a=t-e;return a?ne(e,a):re(isNaN(e)?t:e)}(function e(t){var a=ie(t);function r(e,t){var r=a((e=q(e)).r,(t=q(t)).r),n=a(e.g,t.g),i=a(e.b,t.b),o=oe(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=n(t),e.b=i(t),e.opacity=o(t),e+""}}return r.gamma=e,r})(1);function ce(e){return function(t){var a,r,n=t.length,i=new Array(n),o=new Array(n),c=new Array(n);for(a=0;a<n;++a)r=q(t[a]),i[a]=r.r||0,o[a]=r.g||0,c[a]=r.b||0;return i=e(i),o=e(o),c=e(c),r.opacity=1,function(e){return r.r=i(e),r.g=o(e),r.b=c(e),r+""}}}var se=ce((function(e){var t=e.length-1;return function(a){var r=a<=0?a=0:a>=1?(a=1,t-1):Math.floor(a*t),n=e[r],i=e[r+1],o=r>0?e[r-1]:2*n-i,c=r<t-1?e[r+2]:2*i-n;return ae((a-r/t)*t,o,n,i,c)}})),fe=(ce((function(e){var t=e.length;return function(a){var r=Math.floor(((a%=1)<0?++a:a)*t),n=e[(r+t-1)%t],i=e[r%t],o=e[(r+1)%t],c=e[(r+2)%t];return ae((a-r/t)*t,n,i,o,c)}})),e=>se(e[e.length-1])),de=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(b),le=fe(de),he=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(b),ue=fe(he),pe=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(b),be=fe(pe),me=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(b),ge=fe(me),ve=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(b),ye=fe(ve),xe=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(b),we=fe(xe),Me=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(b),ke=fe(Me),Se=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(b),Ce=fe(Se),Pe=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(b),Ae=fe(Pe),Te=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(b),Re=fe(Te),_e=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(b),He=fe(_e),We=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(b),Ye=fe(We),Be=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(b),Oe=fe(Be),Ee=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(b),Ve=fe(Ee),De=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(b),ze=fe(De),Ge=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(b),Fe=fe(Ge),Ne=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(b),Ie=fe(Ne),Le=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(b),$e=fe(Le),je=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(b),qe=fe(je),Ue=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(b),Xe=fe(Ue),Qe=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(b),Je=fe(Qe),Ke=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(b),Ze=fe(Ke),et=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(b),tt=fe(et),at=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(b),rt=fe(at),nt=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(b),it=fe(nt),ot=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(b),ct=fe(ot),st=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(b),ft=fe(st),dt=function(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-2710.57*e)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-67.37*e)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-2475.67*e)))))))+")"};const lt=Math.PI/180,ht=180/Math.PI;var ut=-.14861,pt=1.78277,bt=-.29227,mt=-.90649,gt=1.97294,vt=gt*mt,yt=gt*pt,xt=pt*bt-mt*ut;function wt(e){if(e instanceof kt)return new kt(e.h,e.s,e.l,e.opacity);e instanceof U||(e=j(e));var t=e.r/255,a=e.g/255,r=e.b/255,n=(xt*r+vt*t-yt*a)/(xt+vt-yt),i=r-n,o=(gt*(a-n)-bt*i)/mt,c=Math.sqrt(o*o+i*i)/(gt*n*(1-n)),s=c?Math.atan2(o,i)*ht-120:NaN;return new kt(s<0?s+360:s,c,n,e.opacity)}function Mt(e,t,a,r){return 1===arguments.length?wt(e):new kt(e,t,a,null==r?1:r)}function kt(e,t,a,r){this.h=+e,this.s=+t,this.l=+a,this.opacity=+r}function St(e){return function t(a){function r(t,r){var n=e((t=Mt(t)).h,(r=Mt(r)).h),i=oe(t.s,r.s),o=oe(t.l,r.l),c=oe(t.opacity,r.opacity);return function(e){return t.h=n(e),t.s=i(e),t.l=o(Math.pow(e,a)),t.opacity=c(e),t+""}}return a=+a,r.gamma=t,r}(1)}P(kt,Mt,A(T,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new kt(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new kt(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*lt,t=+this.l,a=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),n=Math.sin(e);return new U(255*(t+a*(ut*r+pt*n)),255*(t+a*(bt*r+mt*n)),255*(t+a*(gt*r)),this.opacity)}}));St((function(e,t){var a=t-e;return a?ne(e,a>180||a<-180?a-360*Math.round(a/360):a):re(isNaN(e)?t:e)}));var Ct=St(oe),Pt=Ct(Mt(300,.5,0),Mt(-240,.5,1)),At=Ct(Mt(-100,.75,.35),Mt(80,1.5,.8)),Tt=Ct(Mt(260,.75,.35),Mt(80,1.5,.8)),Rt=Mt(),_t=function(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Rt.h=360*e-100,Rt.s=1.5-1.5*t,Rt.l=.8-.9*t,Rt+""},Ht=q(),Wt=Math.PI/3,Yt=2*Math.PI/3,Bt=function(e){var t;return e=(.5-e)*Math.PI,Ht.r=255*(t=Math.sin(e))*t,Ht.g=255*(t=Math.sin(e+Wt))*t,Ht.b=255*(t=Math.sin(e+Yt))*t,Ht+""},Ot=function(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-14825.05*e)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+707.56*e)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-6838.66*e)))))))+")"};function Et(e){var t=e.length;return function(a){return e[Math.max(0,Math.min(t-1,Math.floor(a*t)))]}}var Vt=Et(b("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Dt=Et(b("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),zt=Et(b("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Gt=Et(b("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),Ft=new Array(3).concat("91cf60ffffbffc8d59","1a9641a6d96afdae61d7191c","1a9641a6d96affffbffdae61d7191c","1a985091cf60d9ef8bfee08bfc8d59d73027","1a985091cf60d9ef8bffffbffee08bfc8d59d73027","1a985066bd63a6d96ad9ef8bfee08bfdae61f46d43d73027","1a985066bd63a6d96ad9ef8bffffbffee08bfdae61f46d43d73027","0068371a985066bd63a6d96ad9ef8bfee08bfdae61f46d43d73027a50026","0068371a985066bd63a6d96ad9ef8bffffbffee08bfdae61f46d43d73027a50026").map((function(e){for(var t=e.length/6|0,a=new Array(t),r=0;r<t;)a[r]="#"+e.slice(6*r,6*++r);return a})),Nt=p.interpolateRgbBasis(Ft[Ft.length-1]),It=s(s({},r),{interpolateGnYlRd:Nt}),Lt=a(4),$t=a(10),jt=a(7),qt=a.n(jt),Ut={name:"graph-hover"},Xt={name:"graph-hover-clear"};function Qt(){Ut="graph-hover",Xt="graph-hover-clear"}var Jt={name:"refresh"},Kt={name:"render"},Zt={name:"data-error"},ea={name:"data-received"},ta={name:"data-snapshot-load"},aa={name:"init-edit-mode"};function ra(){Jt="refresh",Kt="render",Zt="data-error",ea="data-received",ta="data-snapshot-load",aa="init-edit-mode"}function na(e,t,a,r,n,i,o){var c=u()(e).find("svg"),s=p.select(c.get(0));if(!(o<=0||0===c.get(0).childNodes.length)){var f=p.scaleLinear().domain([a,r]).range([0,o]),d=function(e,t,a,r){for(var n=t-e,i=Object($t.tickStep)(e,t,3),o=Math.round(n/i),c=[],s=0;s<o;s++){var f=i*s+e;fa(r,f,i)?c.push(r):(r<f&&c.push(r),fa(a,f,i)?c.push(a):(a<f&&c.push(a),c.push(f)))}fa(a,t,i)||c.push(a);return c.push(t),c=l.a.sortBy(l.a.uniq(c))}(a,r,n,i),h=p.axisBottom(f).tickValues(d).tickSize(2),b=c.find(":first-child"),m=sa(c)+2,g=ca(b);p.select(c.get(0)).append("g").attr("class","axis").attr("transform","translate("+g+","+m+")").call(h),s.select(".axis").select(".domain").remove()}}function ia(e){u()(e).find("svg").empty()}function oa(e,t,a){void 0===a&&(a=0);var r=It[e.value],n="always"===e.invert||"dark"===e.invert&&!Lt.contextSrv.user.lightTheme,i=n?t:a,o=n?a:t;return p.scaleSequential(r).domain([i,o])}function ca(e){var t=e.get(0);return t&&t.x&&t.x.baseVal?t.x.baseVal.value:0}function sa(e){var t=e.get(0);return t&&t.height&&t.height.baseVal?t.height.baseVal.value:0}function fa(e,t,a){return Math.abs(e-t)<.3*a}qt.a.directive("optionsColorLegend",(function(){return{restrict:"E",template:'<div class="status-heatmap-color-legend"><svg width="16.8rem" height="24px"></svg></div>',link:function(e,t,a){var r=e.ctrl,n=e.ctrl.panel;function o(){var e=u()(t).find("svg"),a=Math.floor(e.outerWidth());if("spectrum"===n.color.mode){var i=oa(l.a.find(r.colorSchemes,{value:n.color.colorScheme}),a);!function(e,t){var a=u()(e).find("svg"),r=p.select(a.get(0));ia(e);var n=Math.floor(a.outerWidth()),i=a.attr("height");if(n){var o=p.range(0,n,2);r.selectAll(".status-heatmap-color-legend-rect").data(o).enter().append("rect").attr("x",(function(e){return e})).attr("y",0).attr("width",3).attr("height",i).attr("stroke-width",0).attr("fill",(function(e){return t(e)}))}}(t,i)}else if("opacity"===n.color.mode){var o=n.color;!function(e,t){var a=u()(e).find("svg"),r=p.select(a.get(0));ia(e);var n=Math.floor(a.outerWidth()),i=a.attr("height");if(n){var o;"linear"===t.colorScale?o=p.scaleLinear().domain([0,n]).range([0,1]):"sqrt"===t.colorScale&&(o=p.scalePow().exponent(t.exponent).domain([0,n]).range([0,1]));var c=p.range(0,n,2);r.selectAll(".status-heatmap-opacity-legend-rect").data(c).enter().append("rect").attr("x",(function(e){return e})).attr("y",0).attr("width",3).attr("height",i).attr("stroke-width",0).attr("fill",t.cardColor).style("opacity",(function(e){return o(e)}))}}(t,o)}}o(),r.events.on(i.render,(function(){o()}))}}})),qt.a.directive("statusHeatmapLegend",(function(){return{restrict:"E",template:'<div class="status-heatmap-color-legend"><svg width="100px" height="6px"></svg></div>',link:function(e,t,a){var r=e.ctrl,n=e.ctrl.panel;function o(){if(ia(t),r.panel.legend.show&&r.bucketMatrix){var e=r.bucketMatrix.minValue,a=r.bucketMatrix.maxValue,i=null!=n.color.max?n.color.max:a,o=null!=n.color.min?n.color.min:e;if(r.bucketMatrix.noDatapoints&&(a=null!=n.color.max?i=100:100,e=null!=n.color.min?o=0:0),"spectrum"===n.color.mode){var c=l.a.find(r.colorSchemes,{value:n.color.colorScheme});!function(e,t,a,r,n,i){var o=u()(e).find("svg"),c=p.select(o.get(0));ia(e);var s=Math.floor(o.outerWidth())-30,f=o.attr("height"),d=(r-a)/(s/2),l=s/(r-a),h=p.range(a,r,d),b=oa(t,n,i);c.selectAll(".status-heatmap-color-legend-rect").data(h).enter().append("rect").attr("x",(function(e){return(e-a)*l+10})).attr("y",0).attr("width",3).attr("height",f).attr("stroke-width",0).attr("fill",(function(e){return b(e)})),na(e,b,a,r,n,i,s)}(t,c,e,a,i,o)}else if("opacity"===n.color.mode){var s=n.color;!function(e,t,a,r,n,i){var o=u()(e).find("svg"),c=p.select(o.get(0));ia(e);var s=Math.floor(o.outerWidth())-30,f=o.attr("height"),d=(r-a)/(s/2),l=s/(r-a),h=p.range(a,r,d),b=function(e,t,a){void 0===a&&(a=0);var r;"linear"===e.colorScale?r=p.scaleLinear().domain([a,t]).range([0,1]):"sqrt"===e.colorScale&&(r=p.scalePow().exponent(e.exponent).domain([a,t]).range([0,1]));return r}(t,n,i);c.selectAll(".status-heatmap-opacity-legend-rect").data(h).enter().append("rect").attr("x",(function(e){return e*l+10})).attr("y",0).attr("width",3).attr("height",f).attr("stroke-width",0).attr("fill",t.cardColor).style("opacity",(function(e){return b(e)})),na(e,b,a,r,n,i,s)}(t,s,e,a,i,o)}else if("discrete"===n.color.mode){s=n.color;!function(e,t,a){var r=u()(e).find("svg"),n=p.select(r.get(0));ia(e);var i=t.thresholds,o=l.a.map(i,(function(e){return e.tooltip})),c=i.length,s=u()(e).parent().parent().parent().find(".statusmap-panel").find("svg").attr("width"),f=parseInt(s,10),d=[];n.selectAll(".hidden-texts").data(o).enter().append("text").attr("class","axis tick hidden-texts").attr("font-family","sans-serif").text((function(e){return e})).each((function(e,t){var a=this.getBBox().width;d.push(a)})),n.selectAll(".hidden-texts").remove();var h=Math.floor(l.a.min([f-30,(l.a.max(d)+3)*c]));r.attr("width",h);var b=r.attr("height"),m=Math.floor(h/c),g=p.range(c);n.selectAll(".status-heatmap-color-legend-rect").data(g).enter().append("rect").attr("x",(function(e){return e*m})).attr("y",0).attr("width",m+1).attr("height",b).attr("stroke-width",0).attr("fill",(function(e){return a.getDiscreteColor(e)})),function(e,t,a){var r=t.thresholds,n=u()(e).find("svg"),i=p.select(n.get(0));if(a<=0||0===n.get(0).childNodes.length)return;for(var o=r.length,c=Math.floor(a/o),s=p.scaleLinear().domain([0,o]).range([0,a]),f=[],d=[],l=0;l<r.length;l++)f.push(r[l].value),d.push(r[l].tooltip);var h=p.axisBottom(s).tickValues(p.range(0,o,1)).tickSize(2).tickFormat((function(e){var t=Math.floor(e.valueOf()),a=d[t];return void 0!==a||void 0!==(a=f[t])?""+a:"n/a"})),b=n.find(":first-child"),m=sa(n)+2,g=ca(b)+Math.floor(c/2);p.select(n.get(0)).append("g").attr("class","axis").attr("transform","translate("+g+","+m+")").call(h),i.select(".axis").select(".domain").remove()}(e,t,h)}(t,s,r.discreteExtraSeries)}}}o(),r.events.on(i.render,(function(){o()}))}}}));var da=a(3),la=a.n(da),ha=function(){function e(e){e.editor=this,this.panelCtrl=e.ctrl,this.panel=this.panelCtrl.panel,this.unitFormats=la.a.getUnitFormats()}return e.$inject=["$scope"],e.prototype.setUnitFormat=function(e){this.panel.data.unitFormat=e.value,this.panelCtrl.render()},e.prototype.render=function(){this.panelCtrl.render()},e.prototype.onAddThreshold=function(){this.panel.color.thresholds.push({color:this.panel.defaultColor}),this.render()},e.prototype.onRemoveThreshold=function(e){this.panel.color.thresholds.splice(e,1),this.render()},e.prototype.onRemoveThresholds=function(){this.panel.color.thresholds=[],this.render()},e.prototype.onAddThreeLights=function(){this.panel.color.thresholds.push({color:"red",value:2,tooltip:"error"}),this.panel.color.thresholds.push({color:"yellow",value:1,tooltip:"warning"}),this.panel.color.thresholds.push({color:"green",value:0,tooltip:"ok"}),this.render()},e.prototype.onAddSolarized=function(){this.panel.color.thresholds.push({color:"#b58900",value:0,tooltip:"yellow"}),this.panel.color.thresholds.push({color:"#cb4b16",value:1,tooltip:"orange"}),this.panel.color.thresholds.push({color:"#dc322f",value:2,tooltip:"red"}),this.panel.color.thresholds.push({color:"#d33682",value:3,tooltip:"magenta"}),this.panel.color.thresholds.push({color:"#6c71c4",value:4,tooltip:"violet"}),this.panel.color.thresholds.push({color:"#268bd2",value:5,tooltip:"blue"}),this.panel.color.thresholds.push({color:"#2aa198",value:6,tooltip:"cyan"}),this.panel.color.thresholds.push({color:"#859900",value:7,tooltip:"green"}),this.render()},e}();function ua(){return{restrict:"E",scope:!0,templateUrl:"public/plugins/flant-statusmap-panel/partials/options_editor.html",controller:ha}}var pa={urlText:"",urlTemplate:"",urlIcon:"external-link",urlToLowerCase:!0,valueDateFormat:""},ba=function(){function e(e){e.editor=this,this.panelCtrl=e.ctrl,this.panel=this.panelCtrl.panel}return e.$inject=["$scope"],e.prototype.render=function(){this.panelCtrl.render()},e.prototype.onAddUrl=function(){this.panel.tooltip.items.push(Object.assign({},pa)),this.render()},e.prototype.onRemoveUrl=function(e){this.panel.tooltip.items.splice(e,1),this.render()},e.prototype.onRemoveUrls=function(){this.panel.tooltip.items=[],this.render()},e.prototype.getFAIconClasses=function(){return["external-link","plus","anchor","ban","globe","gear","cloud","download","cloud-download"]},e.prototype.getValueDateFormats=function(){return["YYYY/MM/DD/HH_mm_ss","YYYYMMDDHHmmss","YYYY-MM-DD-HH-mm-ss"]},e}();function ma(){return{restrict:"E",scope:!0,templateUrl:"public/plugins/flant-statusmap-panel/partials/tooltip_editor.html",controller:ba}}function ga(e){if(l.a.has(e,"statusmap")){if("v1"===e.statusmap.ConfigVersion)return}else!function(e){var t,a;if(l.a.has(e,"xAxis.labelFormat")&&delete e.xAxis.labelFormat,l.a.has(e,"xAxis.minBucketWidthToShowWeekends")&&delete e.xAxis.minBucketWidthToShowWeekends,l.a.has(e,"xAxis.showCrosshair")&&delete e.xAxis.showCrosshair,l.a.has(e,"xAxis.showWeekends")&&delete e.xAxis.showWeekends,l.a.has(e,"yAxis.showCrosshair")&&delete e.yAxis.showCrosshair,l.a.has(e,"data.unitFormat")&&delete e.data,l.a.has(e,"cards.cardSpacing")&&(l.a.has(e,"cards.cardVSpacing")||e.cards.cardSpacing&&(e.cards.cardVSpacing=e.cards.cardSpacing,e.cards.cardHSpacing=e.cards.cardSpacing),delete e.cards.cardSpacing),l.a.has(e,"usingUrl")&&(l.a.has(e,"tooltip.freezeOnClick")||(e.tooltip.freezeOnClick=e.usingUrl),delete e.usingUrl),l.a.has(e,"urls")){if(!l.a.has(e,"tooltip.items")){e.tooltip.items=[];var r=!0;if(0===e.urls.length&&(r=!1),1===e.urls.length)""===(o=e.urls[0]).base_url&&""===o.label&&(r=!1);if(r){e.tooltip.showItems=!0;try{for(var n=f(e.urls),i=n.next();!i.done;i=n.next()){var o=i.value,c={urlTemplate:l.a.toString(o.base_url),urlText:l.a.toString(o.label),urlIcon:l.a.toString(o.icon_fa),urlToLowerCase:o.forcelowercase,valueDateFormat:""};if(""!==c.urlTemplate){c.urlTemplate=l.a.replace(o.base_url,/\$time/g,"&${__url_time_range}"),c.urlTemplate=l.a.replace(c.urlTemplate,/\$series_label/,"${__y_label}");var s="__value";if(!0===o.useExtraSeries){o.extraSeries.index>-1&&(s+="_"+o.extraSeries.index);var d=l.a.toString(o.extraSeries.format);"YYYY/MM/DD/HH_mm_ss"===d&&(s+="_date",c.valueDateFormat=d)}c.urlTemplate=l.a.replace(c.urlTemplate,/\$series_extra/,"${"+s+"}")}e.tooltip.items.push(c)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(a=n.return)&&a.call(n)}finally{if(t)throw t.error}}}}delete e.urls}e.statusmap={ConfigVersion:"v1"}}(e)}var va=a(6),ya=function(){function e(){this.id=0,this.values=[],this.columns=[],this.multipleValues=!1,this.noColorDefined=!1,this.y="",this.yLabel="",this.pLabels=[],this.x=0,this.xid=0,this.from=0,this.to=0,this.relFrom=0,this.relTo=0,this.mostRecent=!1,this.minValue=0,this.maxValue=0,this.value=0}return e.prototype.belong=function(e){return e>=this.from&&e<=this.to},e.prototype.put=function(e){this.values.push(e)},e.prototype.done=function(){},e.prototype.isEmpty=function(){return 0===this.values.length},e}(),xa=function(){function e(){this.buckets={},this.maxValue=0,this.minValue=0,this.multipleValues=!1,this.noColorDefined=!1,this.noDatapoints=!1,this.targets=[],this.pLabels={},this.rangeMs=0,this.intervalMs=0,this.xBucketSize=0}return e.prototype.get=function(e,t){return e in this.buckets&&t in this.buckets[e]?this.buckets[e][t]:new ya},e.prototype.hasData=function(){var e=this,t=!1;return this.targets.length>0&&this.targets.map((function(a){e.buckets[a].length>0&&(t=!0)})),t},e}(),wa=function(){function e(){this.defaultPageSize=-1,this.pageSize=-1,this.currentPage=0;var e=new xa;this.bucketMatrix=e}return e.prototype.targets=function(){return this.enable?this.bucketMatrix.targets.slice(this.pageSize*this.currentPage,this.pageSize*(this.currentPage+1)):this.bucketMatrix.targets},e.prototype.buckets=function(){if(!this.enable)return this.bucketMatrix.buckets;var e={},t=this;return this.targets().map((function(a){e[a]=t.bucketMatrix.buckets[a]})),e},e.prototype.setEnable=function(e){this.enable=e},e.prototype.setCurrent=function(e){this.currentPage=e},e.prototype.setDefaultPageSize=function(e){this.defaultPageSize=e},e.prototype.setPageSize=function(e){this.pageSize=e},e.prototype.pages=function(){return Math.ceil(this.totalRows()/this.pageSize)},e.prototype.totalRows=function(){return this.bucketMatrix.targets.length},e.prototype.pageStartRow=function(){return this.enable?this.pageSize*this.currentPage+1:1},e.prototype.pageEndRow=function(){if(!this.enable)return this.totalRows();var e=this.pageSize*(this.currentPage+1);return e>this.totalRows()?this.totalRows():e},e.prototype.hasNext=function(){return!!this.enable&&!((this.currentPage+1)*this.pageSize>=this.totalRows())},e.prototype.hasPrev=function(){return!!this.enable&&this.currentPage>0},e.prototype.switchToNext=function(){this.hasNext()&&(this.currentPage=this.currentPage+1)},e.prototype.switchToPrev=function(){this.hasPrev()&&(this.currentPage=this.currentPage-1)},e}(),Ma=a(8),ka=a.n(Ma),Sa=function(){function e(e,t){this.scope=t,this.dashboard=t.ctrl.dashboard,this.panelCtrl=t.ctrl,this.panel=t.ctrl.panel,this.panelElem=e,this.mouseOverBucket=!1,this.originalFillColor=null,e.on("mouseover",this.onMouseOver.bind(this)),e.on("mouseleave",this.onMouseLeave.bind(this))}return e.prototype.onMouseOver=function(e){this.panel.tooltip.show&&this.scope.ctrl.data&&!l.a.isEmpty(this.scope.ctrl.data)&&(this.tooltip||(this.add(),this.move(e,this.tooltip)))},e.prototype.onMouseLeave=function(){this.destroy()},e.prototype.onMouseMove=function(e){this.panel.tooltip.show&&this.move(e,this.tooltip)},e.prototype.add=function(){this.tooltip=p.select("body").append("div").attr("class","graph-tooltip statusmap-tooltip")},e.prototype.destroy=function(){this.tooltip&&this.tooltip.remove(),this.tooltip=null},e.prototype.removeFrozen=function(){this.tooltipFrozen&&(this.tooltipFrozen.remove(),this.tooltipFrozen=null)},e.prototype.showFrozen=function(e){this.removeFrozen(),this.tooltipFrozen=p.select(this.panelElem[0]).append("div").attr("class","graph-tooltip statusmap-tooltip statusmap-tooltip-frozen"),this.displayTooltip(e,this.tooltipFrozen,!0),this.moveRelative(e,this.tooltipFrozen)},e.prototype.show=function(e){this.panel.tooltip.show&&this.tooltip&&(e.panelRelY||(this.displayTooltip(e,this.tooltip,!1),this.move(e,this.tooltip)))},e.prototype.displayTooltip=function(e,t,a){var r,n,i=p.select(e.target),o=i.attr("yid"),c=i.attr("xid"),s=this.panelCtrl.bucketMatrix.get(o,c);if(s&&!s.isEmpty()){var d=s.to,h=s.yLabel,u=s.pLabels,b=s.value,m=s.values,g="";a&&(g='\n<a class="pointer pull-right small tooltip-close">\n      <i class="fa fa-remove"></i>\n</a>\n');var v='<div class="graph-tooltip-time">'+this.dashboard.formatDate(+d,"YYYY-MM-DD HH:mm:ss")+g+"</div>";if("discrete"===this.panel.color.mode){var y=void 0,x="status:";(y=this.panel.seriesFilterIndex>=0?this.panelCtrl.discreteExtraSeries.convertValueToTooltips(b):this.panelCtrl.discreteExtraSeries.convertValuesToTooltips(m)).length>1&&(x="statuses:"),v+="\n      <div>\n        name: <b>"+h+"</b>\n        <br>\n        <span>"+x+"</span>\n        <ul>\n          "+l.a.join(l.a.map(y,(function(e){return'<li style="background-color: '+e.color+'; text-align:center" class="discrete-item">'+e.tooltip+"</li>"})),"")+"\n        </ul>\n      </div>"}else 1===m.length?v+="<div>\n      name: <b>"+h+"</b> <br>\n      value: <b>"+b+"</b> <br>\n      </div>":v+="<div>\n      name: <b>"+h+"</b> <br>\n      values:\n      <ul>\n        "+l.a.join(l.a.map(m,(function(e){return"<li>"+e+"</li>"})),"")+"\n      </ul>\n      </div>";if(v+='<div class="statusmap-histogram"></div>',this.panel.tooltip.showItems){for(var w=JSON.parse(JSON.stringify(this.panel.tooltip.items)),M={},k=0;k<s.values.length;k++)M["__value_"+k]={value:s.values[k]};for(var k in M.__value={value:s.value},M.__y_label={value:h},M.__y_label_trim={value:h.trim()},M.__url_time_range={value:this.panelCtrl.retrieveTimeVar()},u)M["__y_label_"+k]={value:u[k]};try{for(var S=f(w),C=S.next();!C.done;C=S.next()){var P=C.value;if(l.a.isEmpty(P.urlTemplate))P.link="#";else{var A=P.valueDateFormat;""===A&&(A="YYYY/MM/DD/HH_mm_ss");for(k=0;k<s.values.length;k++)M["__value_"+k+"_date"]={value:this.dashboard.formatDate(+s.values[k],A)};M.__value_date={value:this.dashboard.formatDate(+s.value,A)},P.link=this.panelCtrl.templateSrv.replace(P.urlTemplate,M),P.urlToLowerCase&&(P.link=P.link.toLowerCase())}P.label=P.urlText,l.a.isEmpty(P.label)&&(P.label=l.a.isEmpty(P.urlTemplate)?"Empty URL":l.a.truncate(P.link))}}catch(e){r={error:e}}finally{try{C&&!C.done&&(n=S.return)&&n.call(S)}finally{if(r)throw r.error}}if(this.panel.tooltip.showCustomContent)v+="<div>"+this.panelCtrl.templateSrv.replace(this.panel.tooltip.customContent,M)+"</div>";v+=l.a.join(l.a.map(w,(function(e){return'\n          <div>\n            <a href="'+e.link+'" target="_blank">\n            <div class="dashlist-item">\n            <p class="dashlist-link dashlist-link-dash-db">\n              <span style="word-wrap: break-word;" class="dash-title">'+e.label+'</span><span class="dashlist-star">\n              <i class="fa fa-'+e.urlIcon+'"></i>\n            </span></p> </div></a><div>'})),"\n")}if(!this.panel.useMax&&s.multipleValues&&(v+="<div><b>Error:</b> "+this.panelCtrl.dataWarnings.multipleValues.title+"</div>"),"discrete"===this.panel.color.mode&&s.noColorDefined){var T=this.panelCtrl.discreteExtraSeries.getNotColoredValues(m);v+="<div><b>Error:</b> "+this.panelCtrl.dataWarnings.noColorDefined.title+"\n        <br>not colored values:\n        <ul>\n          "+l.a.join(l.a.map(T,(function(e){return"<li>"+e+"</li>"})),"")+"\n        </ul>\n        </div>"}t.html(v),a&&(t.on("click",(function(){p.event.stopPropagation()})).on("mousedown",(function(){p.event.stopPropagation()})).on("mouseup",(function(){p.event.stopPropagation()})),t.select("a.tooltip-close").on("click",this.removeFrozen.bind(this)))}else this.destroy()},e.prototype.move=function(e,t){if(t){var a=u()(t.node())[0],r=a.clientWidth;this.tooltipWidth=r;var n=a.clientHeight,i=e.pageX+30,o=e.pageY+5;return e.pageX+r+40>window.innerWidth&&(i=e.pageX-r-30),e.pageY-window.pageYOffset+n+20>window.innerHeight&&(o=e.pageY-n-5),t.style("left",i+"px").style("top",o+"px")}},e.prototype.moveRelative=function(e,t){if(t){var a=e.pageX-this.panelElem.offset().left,r=e.pageY-this.panelElem.offset().top,n=this.panelElem.width(),i=this.panelElem.height(),o=this.tooltipWidth+25,c=a+30;c+o>n&&(c=n-o),c<0&&(c=0);var s=-(i-r+5);return t.style("left",c+"px").style("top",s+"px").style("width",o+"px")}},e}(),Ca=function(){function e(e,t){this.scope=t,this.dashboard=t.ctrl.dashboard,this.panelCtrl=t.ctrl,this.panel=t.ctrl.panel,this.mouseOverAnnotationTick=!1,e.on("mouseover",this.onMouseOver.bind(this)),e.on("mouseleave",this.onMouseLeave.bind(this))}return e.prototype.onMouseOver=function(e){this.panel.tooltip.show&&this.scope.ctrl.data&&!l.a.isEmpty(this.scope.ctrl.data)&&(this.tooltip||(this.add(),this.move(e)))},e.prototype.onMouseLeave=function(){this.destroy()},e.prototype.onMouseMove=function(e){this.panel.tooltip.show&&this.move(e)},e.prototype.add=function(){this.tooltipBase=p.select("body").append("div").attr("class","statusmap-annotation-tooltip drop drop-popover drop-popover--annotation drop-element drop-enabled drop-target-attached-center drop-open drop-open-transitionend drop-after-open").style("position","absolute"),this.tooltip=this.tooltipBase.append("div").attr("class","drop-content").append("div").append("annotation-tooltip").append("div").attr("class","graph-annotation")},e.prototype.destroy=function(){this.tooltip&&this.tooltip.remove(),this.tooltip=null,this.tooltipBase&&this.tooltipBase.remove(),this.tooltipBase=null},e.prototype.show=function(e){if(this.panel.tooltip.show&&this.tooltip){var t=p.select(e.target).attr("annoId");if(t){var a=this.panelCtrl.annotations[t];if(a){var r=this.dashboard.formatDate(a.time,"YYYY-MM-DD HH:mm:ss"),n=a.text,i=[];a.tags&&(i=l.a.map(a.tags,(function(e){return{text:e,backColor:"rgb(63, 43, 91)",borderColor:"rgb(101, 81, 129)"}})));var o='<div class="graph-annotation__header">\n      <span class="graph-annotation__title"></span>\n    <span class="graph-annotation__time">'+r+'</span></div>\n    <div class="graph-annotation__body">\n      <div>'+n+"</div>\n      "+l.a.join(l.a.map(i,(function(e){return'<span class="label label-tag small" style="background-color: '+e.backColor+"; border-color: "+e.borderColor+'">'+e.text+"</span>"})),"")+'\n    </div>\n      <div class="statusmap-histogram"></div>';this.tooltip.html(o),this.move(e)}else this.destroy()}else this.destroy()}},e.prototype.move=function(e){if(this.tooltipBase){var t=u()(this.tooltipBase.node())[0],a=t.clientWidth,r=t.clientHeight,n=e.pageX-a/2,i=e.pageY+10;return e.pageX+a/2+10>window.innerWidth&&(n=e.pageX-a-30),e.pageY-window.pageYOffset+r+20>window.innerHeight&&(i=e.pageY-r-10),this.tooltipBase.style("left",n+"px").style("top",i+"px")}},e}();var Pa=function(){function e(e,t,a,r){this.scope=e,this.elem=t,this.ctrl=r,this.width=0,this.height=0,this.chartWidth=0,this.chartHeight=0,this.chartTop=0,this.chartBottom=0,this.yAxisWidth=0,this.xAxisHeight=0,this.cardVSpacing=0,this.cardHSpacing=0,this.cardRound=0,this.cardWidth=0,this.cardHeight=0,this.xGridSize=0,this.yGridSize=0,this.dataRangeWidingFactor=1.2,this.$heatmap=this.elem.find(".statusmap-panel"),this.tooltip=new Sa(this.$heatmap,this.scope),this.annotationTooltip=new Ca(this.$heatmap,this.scope),this.yOffset=0,this.selection={active:!1,x1:-1,x2:-1},this.padding={left:0,right:0,top:0,bottom:0},this.margin={left:25,right:15,top:10,bottom:20},this.ctrl.events.on(i.render,this.onRender.bind(this)),this.ctrl.tickValueFormatter=this.tickValueFormatter.bind(this),Lt.appEvents.on(n.graphHover,this.onGraphHover.bind(this),this.scope),Lt.appEvents.on(n.graphHoverClear,this.onGraphHoverClear.bind(this),this.scope),this.$heatmap.on("mousedown",this.onMouseDown.bind(this)),this.$heatmap.on("mousemove",this.onMouseMove.bind(this)),this.$heatmap.on("mouseleave",this.onMouseLeave.bind(this)),this.$heatmap.on("click",this.onMouseClick.bind(this))}return e.prototype.onGraphHoverClear=function(){this.clearCrosshair()},e.prototype.onGraphHover=function(e){this.drawSharedCrosshair(e.pos)},e.prototype.onRender=function(){this.render(),this.ctrl.renderingCompleted()},e.prototype.setElementHeight=function(){try{var e=this.ctrl.height||this.panel.height||this.ctrl.row.height;return l.a.isString(e)&&(e=parseInt(e.replace("px",""),10)),this.panel.usingPagination?e-=this.panel.legend.show?70:40:e-=this.panel.legend.show?32:4,this.$heatmap.css("height",e+"px"),!0}catch(e){return!1}},e.prototype.getYAxisWidth=function(e){var t=e.selectAll(".axis-y text").nodes(),a=l.a.max(l.a.map(t,(function(e){return e.getBBox().width})));return Math.ceil(a)},e.prototype.getXAxisHeight=function(e){if(e.select(".axis-x line").empty())return 30;var t=parseFloat(e.select(".axis-x line").attr("y2"));return parseFloat(e.attr("height"))-t},e.prototype.addXAxis=function(){this.scope.xScale=this.xScale=p.scaleTime().domain([this.timeRange.from,this.timeRange.to]).range([this.xGridSize/2,this.chartWidth-this.xGridSize/2]);var e,t=this.chartWidth/100,a=function(e,t,a){if(t&&a&&e){var r=a-t,n=r/e/1e3;return n<=45?"%H:%M:%S":n<=7200||r<=864e5?"%H:%M":n<=8e4?"%m/%d %H:%M":n<=2419200||r<=31536e6?"%m/%d":"%Y-%m"}return"%H:%M"}(t,this.timeRange.from,this.timeRange.to);e="utc"===this.ctrl.dashboard.getTimezone()?p.utcFormat(a):p.timeFormat(a);var r=p.axisBottom(this.xScale).ticks(t).tickFormat(e).tickPadding(10).tickSize(this.chartHeight),n=this.chartTop,i=this.yAxisWidth;this.heatmap.append("g").attr("class","axis axis-x").attr("transform","translate("+i+","+n+")").call(r),this.heatmap.select(".axis-x").select(".domain").remove()},e.prototype.getYScale=function(e){var t=[],a=this.chartHeight/e.length;t.push(a);for(var r=1;r<e.length;r++)t.push(a*(r+1));return p.scaleOrdinal().domain(e).range(t)},e.prototype.getYAxisScale=function(e){var t=[],a=this.chartHeight/e.length;t.push(this.yOffset);for(var r=1;r<e.length;r++)t.push(a*r+this.yOffset);return p.scaleOrdinal().domain(e).range(t)},e.prototype.addYAxis=function(){var e=this.bucketMatrixPager.targets();"a  z"===this.panel.yAxisSort?e.sort((function(e,t){return e.localeCompare(t,"en",{ignorePunctuation:!1,numeric:!0})})):"z  a"===this.panel.yAxisSort&&e.sort((function(e,t){return t.localeCompare(e,"en",{ignorePunctuation:!1,numeric:!0})}));var t=this.getYAxisScale(e);this.scope.yScale=this.yScale=this.getYScale(e);var a=p.axisLeft(t).tickValues(e).tickSizeInner(0-this.width).tickPadding(5);this.heatmap.append("g").attr("class","axis axis-y").call(a);var r=this.margin.top,n=this.getYAxisWidth(this.heatmap)+5;this.heatmap.select(".axis-y").attr("transform","translate("+n+","+r+")"),this.heatmap.select(".axis-y").select(".domain").remove(),this.heatmap.select(".axis-y").selectAll(".tick line").remove()},e.prototype.wideYAxisRange=function(e,t,a){var r,n,i=(t*(this.dataRangeWidingFactor-1)-e*(this.dataRangeWidingFactor-1))/2;return 0===a?a=((n=t*this.dataRangeWidingFactor)-(r=e-e*(this.dataRangeWidingFactor-1)))/2:(n=Math.ceil((t+i)/a)*a,r=Math.floor((e-i)/a)*a),e>=0&&r<0&&(r=0),{y_min:r,y_max:n}},e.prototype.tickValueFormatter=function(e,t){void 0===t&&(t=null);var a=this.panel.yAxis.format;return function(r){return la.a.valueFormats[a](r,e,t)}},e.prototype.addStatusmapCanvas=function(){var e=this.$heatmap[0];this.width=Math.floor(this.$heatmap.width())-this.padding.right,this.height=Math.floor(this.$heatmap.height())-this.padding.bottom,this.heatmap&&this.heatmap.remove(),this.heatmap=p.select(e).insert("svg",":first-child").attr("width",this.width).attr("height",this.height),this.chartHeight=this.height-this.margin.top-this.margin.bottom,this.chartTop=this.margin.top,this.chartBottom=this.chartTop+this.chartHeight,this.cardHSpacing=null!==this.panel.cards.cardHSpacing?this.panel.cards.cardHSpacing:2,this.cardVSpacing=null!==this.panel.cards.cardVSpacing?this.panel.cards.cardVSpacing:2,this.cardRound=null!==this.panel.cards.cardRound?this.panel.cards.cardRound:0,this.yGridSize=this.chartHeight,this.bucketMatrixPager.targets().length>0&&(this.yGridSize=Math.floor(this.chartHeight/this.bucketMatrixPager.targets().length)),this.cardHeight=this.yGridSize?this.yGridSize-this.cardVSpacing:0,this.yOffset=this.cardHeight/2,this.addYAxis(),this.yAxisWidth=this.getYAxisWidth(this.heatmap)+5,this.chartWidth=this.width-this.yAxisWidth-this.margin.right,this.xGridSize=this.chartWidth/(this.bucketMatrix.xBucketSize+1),this.cardWidth=this.xGridSize-this.cardHSpacing,this.addXAxis(),this.xAxisHeight=this.getXAxisHeight(this.heatmap),this.panel.yAxis.show||this.heatmap.select(".axis-y").selectAll("line").style("opacity",0),this.panel.xAxis.show||this.heatmap.select(".axis-x").selectAll("line").style("opacity",0)},e.prototype.addStatusmap=function(){var e=this,t=null!=this.panel.color.max?this.panel.color.max:this.bucketMatrix.maxValue,a=null!=this.panel.color.min?this.panel.color.min:this.bucketMatrix.minValue;"discrete"!==this.panel.color.mode&&(this.colorScale=this.getColorScale(t,a)),this.setOpacityScale(t),this.heatmap.selectAll(".statusmap-cards-row").data(this.bucketMatrixPager.targets()).enter().selectAll(".statustmap-card").data((function(t){return e.bucketMatrix.buckets[t]})).enter().append("rect").attr("cardId",(function(e){return e.id})).attr("xid",(function(e){return e.xid})).attr("yid",(function(e){return e.yLabel})).attr("x",this.getCardX.bind(this)).attr("width",this.getCardWidth.bind(this)).attr("y",this.getCardY.bind(this)).attr("height",this.getCardHeight.bind(this)).attr("rx",this.cardRound).attr("ry",this.cardRound).attr("class",(function(e){return e.isEmpty()?"empty-card":"bordered statusmap-card"})).style("fill",this.getCardColor.bind(this)).style("stroke",this.getCardColor.bind(this)).style("stroke-width",0).style("opacity",this.getCardOpacity.bind(this)),this.$heatmap.find(".statusmap-card + .bordered").on("mouseenter",(function(t){e.tooltip.mouseOverBucket=!0,e.highlightCard(t)})).on("mouseleave",(function(t){e.tooltip.mouseOverBucket=!1,e.resetCardHighLight(t)})),this._renderAnnotations(),this.ctrl.events.emit(Wa,{chartWidth:this.chartWidth})},e.prototype.highlightCard=function(e){var t=p.select(e.target).style("fill"),a=p.color(t).darker(2),r=p.color(t).brighter(4),n=p.select(e.target);this.tooltip.originalFillColor=t,n.style("fill",a.toString()).style("stroke",r.toString()).style("stroke-width",1)},e.prototype.resetCardHighLight=function(e){p.select(e.target).style("fill",this.tooltip.originalFillColor).style("stroke",this.tooltip.originalFillColor).style("stroke-width",0)},e.prototype.getColorScale=function(e,t){void 0===t&&(t=0);var a=l.a.find(this.ctrl.colorSchemes,{value:this.panel.color.colorScheme}),r=It[a.value],n="always"===a.invert||"dark"===a.invert&&!Lt.contextSrv.user.lightTheme;e===t&&(e=t+1);var i=n?e:t,o=n?t:e;return p.scaleSequential(r).domain([i,o])},e.prototype.setOpacityScale=function(e){"linear"===this.panel.color.colorScale?this.opacityScale=p.scaleLinear().domain([0,e]).range([0,1]):"sqrt"===this.panel.color.colorScale&&(this.opacityScale=p.scalePow().exponent(this.panel.color.exponent).domain([0,e]).range([0,1]))},e.prototype.getCardX=function(e){var t=e.relTo/this.bucketMatrix.rangeMs*this.chartWidth-this.cardWidth/2;return t-this.cardWidth/2<0?this.yAxisWidth+this.cardHSpacing/2:this.yAxisWidth+t-this.cardWidth/2},e.prototype.getCardWidth=function(e){var t,a=e.relTo/this.bucketMatrix.rangeMs*this.chartWidth-this.cardWidth/2;if(a<this.cardWidth/2){var r=a-this.cardHSpacing/2+this.cardWidth/2;t=r>0?r:0}else t=this.chartWidth-a<this.cardWidth/2?this.cardWidth/2+(this.chartWidth-a-this.cardHSpacing/2):this.cardWidth;return t=Math.max(t,5),0===this.cardHSpacing&&(t+=1),t},e.prototype.getCardY=function(e){return this.yScale(e.yLabel)+this.chartTop-this.cardHeight-this.cardVSpacing/2},e.prototype.getCardHeight=function(e){var t=this.yScale(e.yLabel),a=t+this.chartTop-this.cardHeight-this.cardVSpacing/2,r=this.cardHeight;return a<this.chartTop?r=t-this.cardVSpacing/2:(t>this.chartBottom||a+this.cardHeight>this.chartBottom)&&(r=this.chartBottom-a),r=Math.min(r,this.chartHeight),r=Math.max(r,5),0===this.cardVSpacing&&(r+=1),r},e.prototype.getCardColor=function(e){return"opacity"===this.panel.color.mode?this.panel.color.cardColor:"spectrum"===this.panel.color.mode?this.colorScale(e.value):"discrete"===this.panel.color.mode?null!==this.panel.seriesFilterIndex&&-1!==this.panel.seriesFilterIndex?this.ctrl.discreteExtraSeries.getBucketColorSingle(e.values[this.panel.seriesFilterIndex]):this.ctrl.discreteExtraSeries.getBucketColor(e.values):void 0},e.prototype.getCardOpacity=function(e){return"as empty"===this.panel.nullPointMode&&null==e.value?0:"opacity"===this.panel.color.mode?this.opacityScale(e.value):1},e.prototype.getCardStrokeWidth=function(e){return"discrete"===this.panel.color.mode?"1":"0"},e.prototype.getEventOffset=function(e){var t=this.$heatmap.offset();return{x:Math.floor(e.clientX-t.left),y:Math.floor(e.clientY-t.top)}},e.prototype.onMouseDown=function(e){var t=this,a=this.getEventOffset(e);this.selection.active=!0,this.selection.x1=a.x,this.mouseUpHandler=function(){t.onMouseUp()},u()(document).one("mouseup",this.mouseUpHandler.bind(this))},e.prototype.onMouseUp=function(){u()(document).unbind("mouseup",this.mouseUpHandler.bind(this)),this.mouseUpHandler=null,this.selection.active=!1;var e=Math.abs(this.selection.x2-this.selection.x1);if(this.selection.x2>=0&&e>2){var t=this.xScale.invert(Math.min(this.selection.x1,this.selection.x2)-this.yAxisWidth-this.xGridSize/2),a=this.xScale.invert(Math.max(this.selection.x1,this.selection.x2)-this.yAxisWidth-this.xGridSize/2);this.ctrl.timeSrv.setTime({from:ka.a.utc(t),to:ka.a.utc(a)})}this.clearSelection()},e.prototype.onMouseLeave=function(e){Lt.appEvents.emit(n.graphHoverClear),this.clearCrosshair(),this.annotationTooltip.destroy()},e.prototype.onMouseMove=function(e){if(this.heatmap){var t=this.getEventOffset(e);this.selection.active?(this.clearCrosshair(),this.tooltip.destroy(),this.annotationTooltip.destroy(),this.selection.x2=this.limitSelection(e.offsetX),this.drawSelection(this.selection.x1,this.selection.x2)):(this.emitGraphHoverEvent(e),this.drawCrosshair(t.x),this.tooltip.show(e),this.annotationTooltip.show(e))}},e.prototype.onMouseClick=function(e){this.ctrl.panel.tooltip.freezeOnClick&&(this.tooltip.showFrozen(e),this.tooltip.destroy())},e.prototype.getEventPos=function(e,t){var a=this.xScale.invert(t.x-this.yAxisWidth).valueOf(),r=this.yScale.invert(t.y-this.chartTop);return{pageX:e.pageX,pageY:e.pageY,x:a,x1:a,y:r,y1:r,panelRelY:null,offset:t}},e.prototype.emitGraphHoverEvent=function(e){var t=this.xScale.invert(e.offsetX-this.yAxisWidth-this.xGridSize/2).valueOf(),a=this.yScale(e.offsetY),r={pageX:e.pageX,pageY:e.pageY,x:t,x1:t,y:a,y1:a,panelRelY:0};r.panelRelY=Math.max(e.offsetY/this.height,.001),Lt.appEvents.emit(n.graphHover,{pos:r,panel:this.panel})},e.prototype.limitSelection=function(e){return e=Math.max(e,this.yAxisWidth),e=Math.min(e,this.chartWidth+this.yAxisWidth)},e.prototype.drawSelection=function(e,t){if(this.heatmap){this.heatmap.selectAll(".status-heatmap-selection").remove();var a=Math.min(e,t),r=Math.abs(e-t);r>2&&this.heatmap.append("rect").attr("class","status-heatmap-selection").attr("x",a).attr("width",r).attr("y",this.chartTop).attr("height",this.chartHeight)}},e.prototype.clearSelection=function(){this.selection.x1=-1,this.selection.x2=-1,this.heatmap&&this.heatmap.selectAll(".status-heatmap-selection").remove()},e.prototype.drawCrosshair=function(e){if(this.heatmap){this.heatmap.selectAll(".status-heatmap-crosshair").remove();var t=e;t=Math.max(t,this.yAxisWidth),t=Math.min(t,this.chartWidth+this.yAxisWidth),this.heatmap.append("g").attr("class","status-heatmap-crosshair").attr("transform","translate("+t+",0)").append("line").attr("x1",1).attr("y1",this.chartTop).attr("x2",1).attr("y2",this.chartBottom).attr("stroke-width",1)}},e.prototype.drawSharedCrosshair=function(e){if(this.heatmap&&0!==this.ctrl.dashboard.graphTooltip){var t=this.xScale(e.x)+this.yAxisWidth;this.drawCrosshair(t)}},e.prototype.clearCrosshair=function(){this.heatmap&&this.heatmap.selectAll(".status-heatmap-crosshair").remove()},e.prototype.render=function(){this.panel=this.ctrl.panel,this.timeRange=this.ctrl.range,this.bucketMatrix=this.ctrl.bucketMatrix,this.bucketMatrixPager=this.ctrl.bucketMatrixPager,this.bucketMatrix&&this.setElementHeight()&&(this.addStatusmapCanvas(),this.bucketMatrix.noDatapoints||(this.addStatusmap(),this.scope.yAxisWidth=this.yAxisWidth,this.scope.xAxisHeight=this.xAxisHeight,this.scope.chartHeight=this.chartHeight,this.scope.chartWidth=this.chartWidth,this.scope.chartTop=this.chartTop))},e.prototype._renderAnnotations=function(){var e=this;if(this.ctrl.annotations&&0!==this.ctrl.annotations.length&&this.heatmap){var t=l.a.map(this.ctrl.annotations,(function(t,a){return{x:Math.floor(e.yAxisWidth+e.xScale(t.time)),id:a,anno:t.source}})),a=this.heatmap.append("g").attr("class","statusmap-annotations").attr("transform","translate(0.5,0)").selectAll(".statusmap-annotations").data(t).enter().append("g");a.append("line").attr("x1",(function(e){return e.x})).attr("y1",this.chartTop).attr("x2",(function(e){return e.x})).attr("y2",this.chartBottom).style("stroke",(function(e){return e.anno.iconColor})).style("stroke-width",1).style("stroke-dasharray","3,3"),a.append("polygon").attr("points",(function(t){return[[t.x,e.chartBottom+1],[t.x-5,e.chartBottom+6],[t.x+5,e.chartBottom+6]].join(" ")})).style("stroke-width",0).style("fill",(function(e){return e.anno.iconColor})),a.append("rect").attr("x",(function(e){return e.x-5})).attr("width",10).attr("y",this.chartBottom+1).attr("height",5).attr("class","statusmap-annotation-tick").attr("annoId",(function(e){return e.id})).style("opacity",0),this.$heatmap.find(".statusmap-annotation-tick").on("mouseenter",(function(t){e.annotationTooltip.mouseOverAnnotationTick=!0})).on("mouseleave",(function(t){e.annotationTooltip.mouseOverAnnotationTick=!1}))}},e}();function Aa(e){var t=Object.getPrototypeOf(e);if(Object.prototype.hasOwnProperty.call(t,"subscribe"))return!0;var a=0,r={name:"non-existed-event-id"};return e.on(r,(function(){a++})),e.emit(r),e.emit({name:"non-existed-event-id-2"}),e.removeAllListeners(r),1===a}var Ta=function(){function e(e){this.scope=e,this.panelCtrl=e.ctrl,this.panel=e.ctrl.panel}return e.prototype.convertValuesToTooltips=function(e){for(var t=this.panel.color.thresholds,a=[],r=0;r<t.length;r++)for(var n=0;n<e.length;n++)e[n]===t[r].value&&a.push({tooltip:t[r].tooltip?t[r].tooltip:e[n],color:t[r].color});return a},e.prototype.convertValueToTooltips=function(e){for(var t=this.panel.color.thresholds,a=[],r=0;r<t.length;r++)e===t[r].value&&a.push({tooltip:t[r].tooltip?t[r].tooltip:e,color:t[r].color});return a},e.prototype.getNotMatchedValues=function(e){for(var t=[],a=0;a<e.length;a++)this.getMatchedThreshold(e[a])||t.push(e[a]);return t},e.prototype.getNotColoredValues=function(e){for(var t=[],a=0;a<e.length;a++){var r=this.getMatchedThreshold(e[a]);r&&r.color&&""!==r.color||t.push(e[a])}return t},e.prototype.getDiscreteColor=function(e){var t=this.getThreshold(e).color;return t&&""!==t?t:"rgba(0,0,0,1)"},e.prototype.getBucketColorSingle=function(e){if(null==e)return"rgba(0,0,0,1)";var t=this.getMatchedThreshold(e);return t&&t.color&&""!==t.color?t.color:"rgba(0,0,0,1)"},e.prototype.getBucketColor=function(e){var t=this.panel.color.thresholds;if(!e||0===e.length)return this.getMatchedThreshold(null).color;if(1===e.length){var a=this.getMatchedThreshold(e[0]);return a&&a.color&&""!==a.color?a.color:"rgba(0,0,0,1)"}for(var r=!0,n=0;n<e.length;n++)null!=e[n]&&(r=!1);if(r)return this.getMatchedThreshold(null).color;for(var i=0;i<t.length;i++)for(n=0;n<e.length;n++)if(e[n]===t[i].value)return this.getDiscreteColor(i);return"rgba(0,0,0,1)"},e.prototype.updateCardsValuesHasColorInfoSingle=function(){var e=this;this.panelCtrl.bucketMatrix&&(this.panelCtrl.bucketMatrix.noColorDefined=!1,this.panelCtrl.bucketMatrix.targets.map((function(t){e.panelCtrl.bucketMatrix.buckets[t].map((function(t){t.noColorDefined=!1;var a=e.getMatchedThreshold(t.value);a&&a.color&&""!==a.color||(t.noColorDefined=!0,e.panelCtrl.bucketMatrix.noColorDefined=!0)}))})))},e.prototype.updateCardsValuesHasColorInfo=function(){var e=this;this.panelCtrl.bucketMatrix&&(this.panelCtrl.bucketMatrix.noColorDefined=!1,this.panelCtrl.bucketMatrix.targets.map((function(t){e.panelCtrl.bucketMatrix.buckets[t].map((function(t){t.noColorDefined=!1;for(var a=0;a<t.values.length;a++){var r=e.getMatchedThreshold(t.values[a]);if(!r||!r.color||""===r.color){t.noColorDefined=!0,e.panelCtrl.bucketMatrix.noColorDefined=!0;break}}}))})))},e.prototype.getMatchedThreshold=function(e){if(null==e){if("as empty"===this.panel.nullPointMode)return{color:"rgba(0,0,0,0)",value:"null",tooltip:"null"};e=0}for(var t=this.panel.color.thresholds,a=0;a<t.length;a++)if(e===t[a].value)return t[a];return null},e.prototype.getThreshold=function(e){var t=this.panel.color.thresholds;return e<0||e>=t.length==null?{color:"rgba(0,0,0,0)",value:"null",tooltip:"null"}:t[e]},e.prototype.roundIntervalCeil=function(e){switch(!0){case e<=10:return 10;case e<=20:return 20;case e<=50:return 50;case e<=100:return 100;case e<=200:return 200;case e<=500:return 500;case e<=1e3:return 1e3;case e<=2e3:return 2e3;case e<=5e3:return 5e3;case e<=1e4:return 1e4;case e<=15e3:return 15e3;case e<=2e4:return 2e4;case e<=3e4:return 3e4;case e<=6e4:return 6e4;case e<=12e4:return 12e4;case e<=3e5:return 3e5;case e<=6e5:return 6e5;case e<=9e5:return 9e5;case e<=12e5:return 12e5;case e<=18e5:return 18e5;case e<=36e5:return 36e5;case e<=72e5:return 72e5;case e<=108e5:return 108e5;case e<=216e5:return 216e5;case e<=432e5:return 432e5;case e<=864e5:return 864e5;case e<=6048e5:return 6048e5;case e<=2592e6:return 2592e6;default:return 31536e6}},e}();a.d(t,"renderComplete",(function(){return Wa})),a.d(t,"StatusHeatmapCtrl",(function(){return Ya})),a.d(t,"PanelCtrl",(function(){return Ya}));var Ra=[{name:"Spectral",value:"interpolateSpectral",invert:"always"},{name:"RdYlGn",value:"interpolateRdYlGn",invert:"always"},{name:"GnYlRd",value:"interpolateGnYlRd",invert:"always"},{name:"Blues",value:"interpolateBlues",invert:"dark"},{name:"Greens",value:"interpolateGreens",invert:"dark"},{name:"Greys",value:"interpolateGreys",invert:"dark"},{name:"Oranges",value:"interpolateOranges",invert:"dark"},{name:"Purples",value:"interpolatePurples",invert:"dark"},{name:"Reds",value:"interpolateReds",invert:"dark"},{name:"BuGn",value:"interpolateBuGn",invert:"dark"},{name:"BuPu",value:"interpolateBuPu",invert:"dark"},{name:"GnBu",value:"interpolateGnBu",invert:"dark"},{name:"OrRd",value:"interpolateOrRd",invert:"dark"},{name:"PuBuGn",value:"interpolatePuBuGn",invert:"dark"},{name:"PuBu",value:"interpolatePuBu",invert:"dark"},{name:"PuRd",value:"interpolatePuRd",invert:"dark"},{name:"RdPu",value:"interpolateRdPu",invert:"dark"},{name:"YlGnBu",value:"interpolateYlGnBu",invert:"dark"},{name:"YlGn",value:"interpolateYlGn",invert:"dark"},{name:"YlOrBr",value:"interpolateYlOrBr",invert:"dark"},{name:"YlOrRd",value:"interpolateYlOrRd",invert:"dark"}],_a=["opacity","spectrum","discrete"],Ha=["linear","sqrt"];Object(va.loadPluginCss)({dark:"plugins/flant-statusmap-panel/styles/dark.css",light:"plugins/flant-statusmap-panel/styles/light.css"});var Wa={name:"statusmap-render-complete"},Ya=function(e){function t(t,a,r){var c=e.call(this,t,a)||this;return c.annotationsSrv=r,c.opacityScales=[],c.colorModes=[],c.colorSchemes=[],c.dataWarnings={},c.annotations=[],c.pageSizeViewer=15,c.panelDefaults={datasource:null,color:{mode:"spectrum",cardColor:"#b4ff00",colorScale:"sqrt",exponent:.5,colorScheme:"interpolateGnYlRd",defaultColor:"#757575",thresholds:[]},cards:{cardMinWidth:5,cardVSpacing:2,cardHSpacing:2,cardRound:null},xAxis:{show:!0},yAxis:{show:!0,minWidth:-1,maxWidth:-1},tooltip:{show:!0,freezeOnClick:!0,showItems:!1,items:[],showExtraInfo:!1,extraInfo:""},legend:{show:!0},yLabel:{usingSplitLabel:!1,delimiter:"",labelTemplate:""},nullPointMode:"as empty",yAxisSort:"metrics",highlightCards:!0,useMax:!0,seriesFilterIndex:-1,usingPagination:!1,pageSize:15},o.hasAppEventCompatibleEmitter(c.events)||(n.fallbackToStringEvents(),i.fallbackToStringEvents(),Wa="statusmap-render-complete"),"function"==typeof la.a.intervalToMs&&(la.a.interval_to_ms=la.a.intervalToMs),ga(c.panel),l.a.defaultsDeep(c.panel,c.panelDefaults),c.bucketMatrix=new xa,c.bucketMatrixPager=new wa,c.bucketMatrixPager.setEnable(c.panel.usingPagination),c.bucketMatrixPager.setDefaultPageSize(c.panel.pageSize),c.bucketMatrixPager.setPageSize(c.panel.pageSize),t.pager=c.bucketMatrixPager,c.opacityScales=Ha,c.colorModes=_a,c.colorSchemes=Ra,c.graph={chartWidth:-1},c.multipleValues=!1,c.noColorDefined=!1,c.discreteExtraSeries=new Ta(t),c.dataWarnings={noColorDefined:{title:"Data has value with undefined color",tip:"Check metric values, color values or define a new color"},multipleValues:{title:"Data has multiple values for one target",tip:'Change targets definitions or set "use max value"'},noDatapoints:{title:"No data points",tip:"No datapoints returned from data query"}},c.annotations=[],c.annotationsSrv=r,c.events.on(i.render,c.onRender.bind(c)),c.events.on(i.dataReceived,c.onDataReceived.bind(c)),c.events.on(i.dataError,c.onDataError.bind(c)),c.events.on(i.dataSnapshotLoad,c.onDataReceived.bind(c)),c.events.on(i.editModeInitialized,c.onInitEditMode.bind(c)),c.events.on(i.refresh,c.postRefresh.bind(c)),c.events.on(Wa,c.onRenderComplete.bind(c)),c.onCardColorChange=c.onCardColorChange.bind(c),c}return t.$inject=["$scope","$injector","annotationsSrv"],function(e,t){function a(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}(t,e),t.prototype.onRenderComplete=function(e){this.graph.chartWidth=e.chartWidth,this.renderingCompleted()},t.prototype.changeDefaultPaginationSize=function(e){this.bucketMatrixPager.setDefaultPageSize(e),this.bucketMatrixPager.setPageSize(e),this.pageSizeViewer=e,this.render(),this.refresh()},t.prototype.onChangePageSize=function(){this.pageSizeViewer<=0&&(this.pageSizeViewer=this.bucketMatrixPager.defaultPageSize),this.bucketMatrixPager.setPageSize(this.pageSizeViewer),this.bucketMatrixPager.setCurrent(0),this.render(),this.refresh()},t.prototype.onPrevPage=function(){this.bucketMatrixPager.switchToPrev(),this.render()},t.prototype.onNextPage=function(){this.bucketMatrixPager.switchToNext(),this.render()},t.prototype.getChartWidth=function(){if(this.graph.chartWidth>0)return this.graph.chartWidth;var e=$(window).width(),t=this.panel.gridPos.w/24,a=Math.ceil(e*t);return l.a.max([a-200,a/2])},t.prototype.updateTimeRange=function(t){var a=e.prototype.updateTimeRange.call(this,t);return this.calculateInterval(),a},t.prototype.calculateInterval=function(){var e,t=this.getChartWidth(),a=this.panel.cards.cardMinWidth,r=this.panel.cards.cardHSpacing,n=Math.ceil((t-a)/(a+r)),i=this.range.to.valueOf()-this.range.from.valueOf();e=this.discreteExtraSeries.roundIntervalCeil(i/n);var o=1,c=this.panel.interval;c?c=this.templateSrv.replace(c,this.panel.scopedVars):this.datasource&&this.datasource.interval&&(c=this.datasource.interval),c&&(">"===c[0]&&(c=c.slice(1)),o=la.a.interval_to_ms(c)),o>e&&(e=o);var s=la.a.secondsToHms(e/1e3);this.intervalMs=e,this.interval=s},t.prototype.issueQueries=function(e){var t=this;return this.annotationsPromise=this.annotationsSrv.getAnnotations({dashboard:this.dashboard,panel:this.panel,range:this.range}),void 0!==this.annotationsSrv.datasourcePromises?this.annotationsSrv.datasourcePromises.then((function(a){return t.issueQueriesWithInterval(e,t.interval)})):this.issueQueriesWithInterval(e,this.interval)},t.prototype.issueQueriesWithInterval=function(t,a){var r=this.panel.interval;this.panel.interval=a;var n=e.prototype.issueQueries.call(this,t);return this.panel.interval=r,n},t.prototype.onDataReceived=function(e){var t=this;this.data=e,this.intervalMs||this.calculateInterval();var a=this.convertDataToBuckets(e,this.range.from.valueOf(),this.range.to.valueOf(),this.intervalMs,!0);this.bucketMatrix=a,this.bucketMatrixPager.bucketMatrix=a,a.targets.length!==this.bucketMatrix.targets.length&&this.bucketMatrixPager.setCurrent(0),this.noDatapoints=this.bucketMatrix.noDatapoints,this.annotationsPromise?this.annotationsPromise.then((function(e){t.loading=!1,e.annotations&&e.annotations.length>0?t.annotations=e.annotations:t.annotations=[],t.render()}),(function(){t.loading=!1,t.annotations=[],t.render()})):(this.loading=!1,this.annotations=[],this.render())},t.prototype.onInitEditMode=function(){this.addEditorTab("Options",ua,2),this.addEditorTab("Tooltip",ma,3),this.unitFormats=la.a.getUnitFormats()},t.prototype.onRender=function(){this.range&&this.data?(this.multipleValues=!1,this.panel.useMax||this.bucketMatrix&&(this.multipleValues=this.bucketMatrix.multipleValues),this.noColorDefined=!1,"discrete"===this.panel.color.mode&&(-1===this.panel.seriesFilterIndex?this.discreteExtraSeries.updateCardsValuesHasColorInfo():this.discreteExtraSeries.updateCardsValuesHasColorInfoSingle(),this.bucketMatrix&&(this.noColorDefined=this.bucketMatrix.noColorDefined)),this.noDatapoints=!1,this.bucketMatrix&&(this.noDatapoints=this.bucketMatrix.noDatapoints)):this.noDatapoints=!0},t.prototype.onCardColorChange=function(e){this.panel.color.cardColor=e,this.render()},t.prototype.onDataError=function(){this.data=[],this.annotations=[],this.render()},t.prototype.postRefresh=function(){this.noColorDefined=!1},t.prototype.link=function(e,t,a,r){!function(e,t,a,r){new Pa(e,t,a,r)}(e,t,a,r)},t.prototype.retrieveTimeVar=function(){var e=this.timeSrv.timeRangeForUrl();return"from="+e.from+"&to="+e.to},t.prototype.convertDataToBuckets=function(e,t,a,r,n){var i=this,o=new xa;if(o.rangeMs=a-t,o.intervalMs=r,!e||0===e.length)return o.targets=["1.0","0.0","-1.0"],o.buckets["1.0"]=[],o.buckets["0.0"]=[],o.buckets["-1.0"]=[],o.xBucketSize=42,o.noDatapoints=!0,o;var c={},s={};e.map((function(e,t){var a=e.target;if(i.panel.yLabel.usingSplitLabel&&""!==i.panel.yLabel.delimiter){var r=e.target.split(i.panel.yLabel.delimiter),n=[];for(var o in n.__y_label={value:a},r)n["__y_label_"+o]={value:r[o]};""!==i.panel.yLabel.labelTemplate&&(a=i.templateSrv.replace(i.panel.yLabel.labelTemplate,n)),s[a]=r}c.hasOwnProperty(a)||(c[a]=[]),c[a].push(t)}));var f=l.a.keys(c),d={};return f.map((function(a){for(var n=[],i=0;i<c[a].length;i++){var o=e[c[a][i]];l.a.map(o.datapoints,(function(e,a){n.push(e[1]-t)}))}n=l.a.uniq(n),d[a]=[];for(var s=n.length-1;s>=0;s--){var f=n[s],h=0;if(f<0)h=f-r;else if(s-1>=0){h=n[s-1]+1;var u=f-r;h<u&&(h=u)}d[a][f]=[h,f]}})),f.map((function(e){var i=[],c=a-t;if(n){var f=new ya;f.yLabel=e,f.relTo=c,f.relFrom=c,f.values=[],f.mostRecent=!0,d[e].hasOwnProperty(c)&&(f.relFrom=d[e][c][0],c=f.relFrom),f.to=f.relTo+t,f.from=f.relFrom+t,i.push(f)}for(var l=0,h=0;h>=0;){var u=new ya;u.yLabel=e,u.pLabels=s[e],u.relTo=c-l*r,u.relFrom=c-(l+1)*r,u.to=u.relTo+t,u.from=u.relFrom+t,u.values=[],h=u.relFrom,i.push(u),l++}i.map((function(e,t){e.xid=t})),o.buckets[e]=i})),o.minValue=Number.MAX_VALUE,o.maxValue=Number.MIN_SAFE_INTEGER,f.map((function(t){c[t].map((function(a){e[a].datapoints.map((function(e){for(var a=0;a<o.buckets[t].length;a++)o.buckets[t][a].belong(e[1])&&o.buckets[t][a].put(e[0])}))})),o.buckets[t].map((function(e){e.minValue=l.a.min(e.values),e.maxValue=l.a.max(e.values),e.minValue<o.minValue&&(o.minValue=e.minValue),e.maxValue>o.maxValue&&(o.maxValue=e.maxValue),e.value=e.maxValue,e.values.length>1&&(o.multipleValues=!0,e.multipleValues=!0,e.value=-1!==i.panel.seriesFilterIndex?e.values[i.panel.seriesFilterIndex]:e.maxValue)}))})),o.xBucketSize=Number.MIN_SAFE_INTEGER,f.map((function(e){var t=o.buckets[e].length;t>o.xBucketSize&&(o.xBucketSize=t)})),o.targets=f,o.pLabels=s,o},t.templateUrl="module.html",t}(va.MetricsPanelCtrl)}])}));
//# sourceMappingURL=module.js.map